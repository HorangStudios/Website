<!doctype html>
<html>

<head>
  <title>HorangHill</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../css/post.css">
  <link rel="icon" type="image/x-icon" href="../../css/HorangHill.png">
  <script src="https://kit.fontawesome.com/970a0290cd.js" crossorigin="anonymous"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9451295160532565" crossorigin="anonymous"></script>
</head>

<body>
  <div class="notifBanner">
    A new website is about to be constructed!
    
  </div>
  
  <header>
    <h1>HorangHill</h1><br>
    <a class="navlink" href="home.html" style="color: white; text-decoration: none;">Home</a>
    <a class="navlink" href="post.html" style="color: white; text-decoration: none;">Publish</a>
    <a class="navlink" href="download.html" style="color: white; text-decoration: none;">Download</a>
    <a class="navlink" href="https://horanghill.createaforum.com/index.php"
      style="color: white; text-decoration: none;">Forum</a>
    <a class="navlink" href="account.html" style="color: white; text-decoration: none;">Account</a>
  </header>
  <main style="display: none;" id="main">
    <h1 id="greetings">Welcome Back!</h1>
    <div style="display: flex; width: 100%; overflow: auto;">
      <div class="quickcard">
        <a href="post.html">
          <h3>Publish</h3>
        </a>
        <div class="author">Publish a game</div>
      </div>

      <div class="quickcard">
        <a href="download.html">
          <h3>Download</h3>
        </a>
        <div class="author">Download the editor</div>
      </div>

      <div class="quickcard">
        <a href="https://horanghill.createaforum.com/index.php">
          <h3>Forum</h3>
        </a>
        <div class="author">Talk with the community</div>
      </div>

      <div class="quickcard">
        <a href="#greetings" onclick="firebase.auth().signOut(); window.location.replace('../index.html')">
          <h3>Log out</h3>
        </a>
        <div class="author">Log out from your account</div>
      </div>

    </div>
    <hr><br>
    <h1><i class="fa-solid fa-gamepad"></i> Play Games</h1>
    <div id="gamelist" class="cardholder"></div>
    <hr>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9451295160532565"
      crossorigin="anonymous"></script>
    <!-- horang-ad -->
    <div id="adcontainer">
      <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px"
      data-ad-client="ca-pub-9451295160532565" data-ad-slot="9073494877"></ins>  
    </div>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <hr>

    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-auth.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyDE-mQcJoquJxLrHAcS1kZbpjUbHYQmzsE",
        authDomain: "horanghill.firebaseapp.com",
        databaseURL: "https://horanghill-default-rtdb.firebaseio.com",
        projectId: "horanghill",
        storageBucket: "horanghill.appspot.com",
        messagingSenderId: "710235265347",
        appId: "1:710235265347:web:37fb53fe0bb9c4ecdab7f6",
        measurementId: "G-S1JMDFPGL0"
      };
      firebase.initializeApp(firebaseConfig);
      var database = firebase.database();
      var gamescontainer = document.getElementById('gamelist');

      //greetings time
      let today = new Date();
      let hour = today.getHours();
      let greetings
      if (hour >= 5 && hour < 12) {
        greetings = ("<i class='fa-solid fa-sun'></i> Good morning");
      } else if (hour >= 12 && hour < 18) {
        greetings = ("<i class='fa-regular fa-sun'></i> Good afternoon");
      } else {
        greetings = ("<i class='fa-solid fa-sun'></i> Good evening");
      }

      database.ref('games').on('value', function (snapshot) {
        document.getElementById('main').style.display = "block"
        gamescontainer.innerHTML = '';
        var displayName = firebase.auth().currentUser.displayName;
        document.getElementById('greetings').innerHTML = `${greetings}, ${displayName}!`

        let games = snapshot.val();

        Object.keys(games).forEach(function (gameId) {
          var game = games[gameId];
          var card = document.createElement('div');
          card.className = 'card';
          card.innerHTML =
            '<img src="' + game.thumbnail + '"><br><br>' +
            '<h3>' + game.title + '</h3>' +
            '<div class="author"> By ' + game.createdBy + '</div>';
          card.onclick = function () {
            window.location.href = ("details.html?id=" + gameId);
          }

          gamescontainer.prepend(card);
        });
      });
    </script>
  </main>
</body>

</html>
